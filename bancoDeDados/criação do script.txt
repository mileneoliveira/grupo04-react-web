-- criação das tabelas

CREATE TABLE Objetivo(
	id_objetivo int NOT NULL IDENTITY(1,1) PRIMARY KEY,
	titulo varchar(45) NOT NULL,
	descricao varchar(45) ,
	peso_meta decimal(10,2) ,
	data_meta date NOT NULL ,
	data_criacao date NOT NULL,
	usuario_id int NOT NULL,
	FOREIGN KEY (usuario_id) REFERENCES Usuario(id_usuario)
);

CREATE TABLE Usuario(
	id_usuario int NOT NULL IDENTITY(1,1) PRIMARY KEY,
	nome varchar(45) NOT NULL,
	senha varchar(45) NOT NULL,
	email varchar(45) NOT NULL,
	peso decimal(10,2) ,
	altura int ,
	data_nascimento date ,
	autenticado bit 
);


CREATE TABLE Publicacao(
	id_publicacao int NOT NULL IDENTITY(1,1) PRIMARY KEY,
	descricao varchar(300) NOT NULL,
	curtida int NOT NULL,
	url_imagem varchar(450) NOT NULL,
	usuario_id int NOT NULL, 
	FOREIGN KEY (usuario_id) REFERENCES Usuario(id_usuario)
);

CREATE TABLE Refeicao(
	id_refeicao int NOT NULL IDENTITY(1,1) PRIMARY KEY,
	tipo varchar(45) NOT NULL,
	data_refeicao date NOT NULL,
	usuario_id int NOT NULL,
	FOREIGN KEY (usuario_id) REFERENCES Usuario(id_usuario)
);

CREATE TABLE Categoria(
	id_categoria int NOT NULL IDENTITY(1,1) PRIMARY KEY,
	nome varchar(100)
);

CREATE TABLE Alimento(
	id_alimento int NOT NULL IDENTITY(1,1) PRIMARY KEY,
	nome varchar(45) NOT NULL,
	porcao decimal(10,2) NOT NULL,
	proteina decimal(10,2) NOT NULL,
	colesterol decimal(10,2) NOT NULL,
	carboidrato decimal(10,2) NOT NULL,
	fibra decimal(10,2) NOT NULL,
	calcio decimal(10,2) NOT NULL,
	ferro decimal(10,2) NOT NULL,
	sodio decimal(10,2) NOT NULL,
	calorias decimal(10,2) NOT NULL,
	categoria_id int NOT NULL,
	FOREIGN KEY (categoria_id) REFERENCES Categoria(id_categoria)
);

CREATE TABLE Refeicao_alimento(
	id_alimento int NOT NULL PRIMARY KEY,
	FOREIGN KEY (id_alimento) REFERENCES Alimento(id_alimento),
	id_refeicao int NOT NULL PRIMARY KEY,
	FOREIGN KEY (id_refeicao) REFERENCES Refeicao(id_refeicao)
);

CREATE TABLE Refeicao_alimento(
    id_alimento int NOT NULL,
    id_refeicao int NOT NULL,
    PRIMARY KEY CLUSTERED ( [id_alimento], [id_refeicao] ),
    FOREIGN KEY (id_alimento) REFERENCES Alimento(id_alimento),
    FOREIGN KEY (id_refeicao) REFERENCES Refeicao(id_refeicao)
);



	
-- insert 

INSERT INTO Categoria(nome) VALUES
('Cereais e derivados'),
('Verduras, hortaliças e derivados'),
('Frutas e derivados'),
('Gorduras e óleos'),
('Pescados e frutos do mar'),
('Carnes e derivados'),
('Leite e derivados'),
('Bebidas (alcoólicas e não alcoólicas)'),
('Ovos e derivados'),
('Produtos açucarados'),
('Miscelâneas'),
('Outros alimentos industrializados'),
('Alimentos preparados'),
('Leguminosas e derivados'),
('Nozes e sementes');


INSERT INTO Alimento(nome, porcao, proteina, colesterol, carboidrato, fibra, calcio, ferro, sodio, calorias, id_categoria) VALUES

























-- COMO VAMOS FAZER :
('Arroz integral cozido', 100, 2.58, 0.00, 25.80, 2.74, 5.20, 0.26, 1.24, 123.53, 1),
('Arroz integral cru', 100, 7.32, 0.00, 77.45, 4.81, 7.81, 0.94, 1.64, 359.67, 1),


- ATENÇÃO - ATENÇÃO - ATENÇÃO - ATENÇÃO - ATENÇÃO - ATENÇÃO - ATENÇÃO - ATENÇÃO -


-- USAR ASPAS SIMPLES PELA MOR DE DEUS;
-- USAR 2 CASAS DECIMAIS (FICA MAIS FACIL);
-- PORÇÃO SEMPRE É 100;
-- QUANDO FOR NA COLOCAR 0.00;
-- QUANDO FOR TR OU STRING ESTRANHA PESQUISAR O NOME E O ATIBUTO;
-- SE O NOME FOR MUITO ESTRANHO PROCURAR O NOME POPULAR;
-- VERIFICAR SE ESSAS MEDIDAS SE REPETEM EM TODOS; 

PORCAO = G
CALORIA = KCAL
COLESTEROL = MG
CARBOIDRATO = G
FIBRA = G
CALCIO = MG
FERRO = MG
SODIO = MG
PROTEINA = G


-- CASO ALGUM DOS ITENS TENHA MEDIDA DIFERENTE DESSAS MARCAR E MANDAR NO GRUPO 



